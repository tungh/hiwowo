@(user:Option[models.user.User],page:models.Page[(models.diagram.Diagram,models.user.User)])
@views.html.template(user,nav="index",subNav="index")(css="/assets/css/template/page.css"){


<div class="banner">
    <ul>
        <li style="background-image: url('/images/sunset.jpg');">
            <div class="inner">
                <h1>The jQuery slider that just slides.</h1>
                <p>No fancy effects or unnecessary markup, and it’s less than 3kb.</p>

                <a class="btn" href="#download">Download</a>
            </div>
        </li>

        <li style="background-image: url('img/wood.jpg');">
            <div class="inner">
                <h1>Fluid, flexible, fantastically minimal.</h1>
                <p>Use any HTML in your slides, extend with CSS. You have full control.</p>

                <a class="btn" href="#download">Download</a>
            </div>
        </li>

        <li style="background-image: url('/images/subway.jpg');">
            <div class="inner">
                <h1>Open-source.</h1>
                <p>Everything to do with Unslider is hosted on GitHub.</p>

                <a class="btn" href="//github.com/idiot/unslider">Contribute</a>
            </div>
        </li>

        <li style="background-image: url('/images/shop.jpg');">
            <div class="inner">
                <h1>Uh, that’s about it.</h1>
                <p>I just wanted to show you another slide.</p>

                <a class="btn" href="#download">Download</a>
            </div>
        </li>
    </ul>
</div>
<div class="container index">

    <div class="row">

        <section class="mod-body">
        <div class="main">
            <div class="diagrams">

                @for((diagram,user)<-page.items ){
                <dl class="diagram clearfix">
                    <dt class="diagram-content fl">
                    <div class="pics">
                        <a href="@controllers.routes.Diagrams.diagram(diagram.id.get)" target="_blank" class="pics-list">
                            @for(src <- diagram.pics.getOrElse("").split(",")){
                            @if(src.trim !=""){
                           <img src="@src">
                            }
                            }

                        </a>
                        <div class="pics-hidden"></div>
                    </div>
                    <div class="pics-too-high-close">收起</div>
                    <div class="intro">
                       @diagram.intro.getOrElse("")
                    </div>
                    </dt>

                    <dd class="diagram-info fr">
                        <div class="pin">
                            <h3 class="title"><a href="@controllers.routes.Diagrams.diagram(diagram.id.get)" target="_blank"> @diagram.title </a> </h3>
                            <div class="user-info mb10">
                                    <span class="user-img">
                                        <a href="@controllers.users.routes.Users.home(user.id.get)" target="_blank"><img src="@user.pic"width="36" height="36"></a>
                                    </span>
                                <span class="user-name"><a href="@controllers.users.routes.Users.home(user.id.get)" target="_blank"> @user.name </a> </span>
                            </div>
                            <div class="meta">
                                <div class="like-common like-common-s" >
                                    <a  class="like" rel="upDiagram" href="javascript:void(0)" data-id="@diagram.id.get" title="喜欢"><i>喜欢</i></a>
                                    <div class="like-num">
                                        <dl class="J_scrollUp">
                                            <dd class="J_FavorNum" data-val="@diagram.loveNum">@diagram.loveNum</dd>
                                            <dd>+1</dd>
                                        </dl>
                                    </div>
                                </div>
                                 <div class="share clearfix">
                                     <div class="bdsharebuttonbox"><a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a><a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a><a href="#" class="bds_sqq" data-cmd="sqq" title="分享到QQ好友"></a></div>
                                 </div>
                                <div class="discuss">
                                    <a href="@controllers.routes.Diagrams.diagram(diagram.id.get)" target="_blank"> @diagram.discussNum 评论  </a>
                                </div>
                            </div>
                        </div>
                    </dd>
                </dl>
                }
            </div>
            <div class="pagin inlineblock fr mt10" id="J_Pagination">
                @if(page.nums.length>1){
                @page.prev.map { page =>
                <a class="prev" href="@controllers.routes.Pages.index(page,10)">上一页</a>
                }
                @for(num <-page.nums){
                @if(num==page.currentPage){
                <span class="current" >@num</span>
                }else {
                <a href="@controllers.routes.Pages.index(num,10)">@num</a>
                }
                }
                @page.next.map { page =>
                <a class="next" href="@controllers.routes.Pages.index(page,10)">下一页</a>
                }
                }
            </div>
        </div>
        <div class="side">
            <div class="qr">
                <img src="/assets/images/qr_hiwowo.jpg" width="270" height="270" alt="嗨喔喔 微信号">
            </div>
        </div>
    </section>

        </div>
    </div>



}{
<script type="text/javascript">
    seajs.use(["hiwowo/pages/page.js","hiwowo/diagram/diagram.favor"])
</script>
}


